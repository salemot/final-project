<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>قعده - اختيار الفئات</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" />
    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        font-family: 'Cairo', sans-serif;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          قعده <img style="width: 60px" src="/img/ga3da.png" alt="قعده" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasDarkNavbar"
          aria-controls="offcanvasDarkNavbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="offcanvas offcanvas-end text-bg-dark"
          tabindex="-1"
          id="offcanvasDarkNavbar"
          aria-labelledby="offcanvasDarkNavbarLabel"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">
              عدد العابي
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">
                  العابك
                </a>
                
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <div class="container mt-5 pt-5">
      <h1 class="mb-4 text-center">اختر الفئات</h1>
      <div class="row justify-content-center">
        <!-- الفئات -->
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/who-player-icon.png"
              class="card-img-top img"
              alt="من اللاعب"
            />
            <p>من اللاعب</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/kuwait-flag.png"
              class="card-img-top img"
              alt="اعلام"
            />
            <p>اعلام</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/general.png"
              class="card-img-top img"
              alt="معلومات عامه"
            />
            <p>معلومات عامه</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/islamic-icon.png"
              class="card-img-top img"
              alt="اسلاميات"
            />
            <p>اسلاميات</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/soccer.png"
              class="card-img-top img"
              alt="من سجل الهدف"
            />
            <p>من سجل الهدف</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/amthal.png"
              class="card-img-top img"
              alt="امثال كويتيه"
            />
            <p>امثال كويتيه</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="/img/movie.png"
              class="card-img-top img"
              alt="مقتطفات من افلام"
            />
            <p>مقتطفات من افلام</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img src="/img/3`swat.png" class="card-img-top img" alt="غزوات" />
            <p>غزوات</p>
          </button>
        </div>
        <div class="col-md-3 mb-3">
          <button class="btn btn-category" onclick="toggleSelection(this)">
            <img
              src="https://i1.sndcdn.com/avatars-qpIGmzsYTTEnViAB-Lhp8Dw-t500x500.jpg"
              class="card-img-top img"
              alt="أناشيد"
            />
            <p>أناشيد</p>
          </button>
        </div>
      </div>

      <!-- الفئات المختارة -->
      <div class="mt-4 text-center">
        <h2>الفئات المختارة:</h2>
        <ul id="selectedCategoriesList" class="list-group list-group-horizontal d-flex justify-content-center"></ul>
      </div>

      <!-- زر "ابدأ اللعبة" وأسماء الفرق -->
      <div class="text-center mt-5">
        <!-- إدخال أسماء الفرق -->
        <div class="text-team">
          <form id="teamForm" class="teams-form d-flex flex-column align-items-center">
            <div class="team-group mb-3">
              <input
                class="form-control team-input"
                type="text"
                id="team1"
                placeholder="اسم الفريق الأول"
                required
              />
            </div>
            <div class="team-group mb-3">
              <input
                class="form-control team-input"
                type="text"
                id="team2"
                placeholder="اسم الفريق الثاني"
                required
              />
            </div>
          </form>
        </div>

        <!-- زر "ابدأ اللعبة" في المنتصف -->
        <button
          type="button"
          class="btn btn-primary btn-lg mt-3"
          onclick="startGame()"
        >
          ابدأ اللعبة
        </button>
      </div>
    </div>
    
     <a href="loading.html"><button type="button" class="btn btn-primary btn-lg mt-3" >our social media</button></a>

    <script>
      const maxCategories = 6;
      let selectedCategories = []; 

      function toggleSelection(button) {
        const categoryText = button.querySelector("p").textContent;
        const index = selectedCategories.indexOf(categoryText);

        if (index > -1) {
          selectedCategories.splice(index, 1); // إزالة الفئة من القائمة
          button.classList.remove("selected"); // إزالة التأثير الأخضر
        } else {
          if (selectedCategories.length < maxCategories) {
            selectedCategories.push(categoryText); // إضافة الفئة
            button.classList.add("selected"); // إضافة التأثير الأخضر
          } else {
            alert("يمكنك اختيار حتى 6 فئات فقط.");
            return;
          }
        }

        updateSelectedCategories();
      }

      function updateSelectedCategories() {
        const listContainer = document.getElementById("selectedCategoriesList");
        listContainer.innerHTML = "";

        selectedCategories.forEach((category) => {
          const listItem = document.createElement("li");
          listItem.textContent = category;
          listItem.classList.add("list-group-item");
          listContainer.appendChild(listItem);
        });
      }

      function startGame() {
        const team1 = document.getElementById("team1").value;
        const team2 = document.getElementById("team2").value;

        if (!team1 || !team2) {
          alert("يرجى إدخال أسماء الفريقين");
          return;
        }

        const categoriesParam = encodeURIComponent(
          selectedCategories.join(",")
        );
        localStorage.setItem(
          "selectedCategories",
          JSON.stringify(selectedCategories)
        );
        localStorage.setItem("team1", team1);
        localStorage.setItem("team2", team2);

        const url = `questions.html?categories=${categoriesParam}`;
        window.location.href = url;
      }
    </script>
  </body>
</html>
